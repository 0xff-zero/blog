# 怎理解Go中的嵌入类型

首先什么是嵌入类型？

首先开看一个定义：

> Go语言允许用户扩展或者修改已有的类型，这个功能对代码复用很重要，在修改已有类型以符合新类型的时候也很重要。这个功能是通过嵌入类型（type embedding）完成的。嵌入类型是将已有的类型直接声明在新的结构类型里。被嵌入的类型被称为新的外部类型的内部类型。

我提炼一下。嵌入类型完成了以下使命：

- 允许用户扩展或者修改已有的类型，对代码复用很重要
- 嵌入类型是将已有的类型直接声明在新的结构类型里



理解了吗？有什么用呢？在看一段描述：

> 通过嵌入类型，与内部类型相关的标识符会提升到外部类型上。这些被提升的标识符就像直接声明在外部类型里的标识符一样，也是外部类型的一部分。这样外部类型就组合了内部类型包含的所有属性，并且可以添加新的字段和方法。外部类型也可以通过声明与内部类型标识符同名的标识符来覆盖内部标识符的字段或者方法。这就是扩展或者修改已有类型的方法。



我总结下：

- 内部类型相关的标识符会提升到外部类型上，直接声明在外部类型里的标识符一样，也是外部类型的一部分
- 外部类型就组合了内部类型包含的所有属性，并且可以添加新的字段和方法
- 通过声明与内部类型标识符同名的标识符来覆盖内部标识符的字段或者方法

提问：

1. 嵌入以后，私有类型（没用大写字母开头的）在外部类型能访问吗？

​	答案是肯定的，嵌入以后，内部类型的私有类型，也可以使用外部类型访问

2. 属性都继承了，那么和继承有什么差别呢？

   Go不支持继承，嵌入可以理解为继承，并且更加简洁，差别是，在Java中继承你还是访问不了私有成员的，但是go的嵌入是可以访问私有成员的

3.  嵌入和聚合一样吗？

   不一样的，嵌入使用的是匿名变量，所有属性进行提升，聚合使用的是具名变量。

4. 





参考：

http://c.biancheng.net/view/5395.html

https://blog.51cto.com/speakingbaicai/1703245