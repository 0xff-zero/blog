# ABTest-系统设计

在上一篇文章，我们已经对ABTest系统进行了比较详细的拆解。

![](https://gitee.com/lidaming/assets/raw/master/abtest/ab_flow2.jfif)

ABTest是对流量进行分块对比的方案效果，辅助决策的系统。这里的流量到底在描述什么？如何利用利用对效果进行对比呢？

著名的豌豆实验，大家都知道，通过对比，发现遗传规律。所以实验过程中使用对比是常见的方案。ABTest相当于在助力业务的时候，提供了基础环境。

在这里聊的对流量分组，流量指的是UV不是PV。就是说是面向“用户”进行分组的。

> 为什么是面向用户呢？这里是处于对同一个用户访问同一个页面的时候，是固定样式的，角度出发考虑的。
>
> 如果可以接受，不用两次访问，展现的页面是不同的，可以针对PV的流量进行分组，展开试验。

![](chaju.jpg)

这里思考下：针对UV和PV的流量进行分组的话，产生的影响会是什么？

UV：在针对人进行分组的时候，一个人在进行到实验的时候，所进入到的实验是固定的

PV：任何一个请求都是独立的个体

在实现细节上是有差异的，并且在产生最终的数据的分析结果上，可能也是有差异的。在使用PV进行分组的话，如果有一批人的的流量都分到了某一个分组，这几个人的偏好是相同的，如果这几个人产生了很高的流量，会提升这个分组的转化率，影响分析结果。

## 基础逻辑

无论是针对任何场景，最终是要把用户分入某一个实验的分组。用户可以理解为一个标识（甚至不一定是一个人，只是一个具有标识的对象）。对用户分组原理如图：

![](group.jpg)

## 架构升级

